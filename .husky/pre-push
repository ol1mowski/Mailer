. "$(dirname -- "$0")/_/husky.sh"

echo "🚀 Running pre-push checks..."

echo "📦 Building and testing client..."
cd client && npm run build && npm run test
CLIENT_EXIT_CODE=$?

if [ $CLIENT_EXIT_CODE -ne 0 ]; then
  echo "❌ Client build or tests failed!"
  exit 1
fi

echo "☕ Building and testing server..."
cd ../server && mvnw.cmd clean compile test
SERVER_EXIT_CODE=$?

if [ $SERVER_EXIT_CODE -ne 0 ]; then
  echo "❌ Server build or tests failed!"
  exit 1
fi

echo "✅ All checks passed! Pushing to remote..."
